{% import 'form_macros.html' as forms %}
{% if error_message %}
<div class="alert alert-danger">{{ error_message }}</div>
{% endif %}
<form method="post" id="editRowForm" action="{{ url_for('edit_row', table_name=table_name, row_id=row_dict[pk_col]) }}?modal=1">
    {% for col, dtype, is_nullable in form_columns %}
        <div class="mb-3">
            <label for="{{ col }}" class="form-label">
                {{ prettify_column_name(col) }} ({{ dtype }})
                {% if is_nullable == 'NO' %}<span style="color:red">*</span>{% endif %}
            </label>
            <div class="input-group">
                <input type="text" class="form-control" id="{{ col }}" name="{{ col }}" value="{{ row_dict[col] if row_dict[col] is not none else '' }}" {% if is_nullable == 'NO' %}required{% endif %}>
                {% if 'date' in col|lower %}
                    <button type="button" class="btn btn-outline-secondary today-btn" data-target="{{ col }}">Today</button>
                {% endif %}
                {% if table_name == 'experiments' and col == 'sample_id' %}
                    <button type="button" class="btn btn-outline-info auto-fill-btn" data-target="batch_id" data-source="sample_id">Auto Fill Batch</button>
                {% endif %}
                {% if col == 'file_location' %}
                    <button type="button" class="btn btn-outline-primary browse-btn" data-target="{{ col }}">Browse</button>
                    <input type="file" id="file-input-{{ col }}" style="display: none;" accept=".doc,.docx,.xls,.xlsx,.pdf,.txt">
                {% endif %}
            </div>
        </div>
    {% endfor %}
    <div class="d-flex justify-content-between">
        <button type="button" class="btn btn-danger delete-row-btn" data-table="{{ table_name }}" data-id="{{ row_dict[pk_col] }}">
            <i class="fas fa-trash me-2"></i>Delete Row
        </button>
        <button type="submit" class="btn btn-warning">
            <i class="fas fa-save me-2"></i>Update Row
        </button>
    </div>
</form>
<p class="mt-2"><span style="color:red">*</span> Required field</p>

 